import{r as l,c as w,w as d,a,o as V,b as n,d as p,t as I,i as T}from"./index-B8VNrrUr.js";const N={__name:"AllBookingsView",setup($){const _=l(10),f=l([{title:"預約ID",key:"id"},{title:"客戶名稱",key:"userName",align:"start"},{title:"預約時間",key:"dateTime"}]),m=l([]),u=l(!0),v=l(0),s=l("");async function g({page:r,itemsPerPage:e,sortBy:o}){u.value=!0;try{let t=`/bookings?_page=${r}&_limit=${e}`;o&&o.length>0?t+=`&_sort=${o[0].key}&_order=${o[0].order}`:t+="&_sort=dateTime&_order=desc",s.value&&(t+=`&q=${s.value}`);const c=await T.get(t);m.value=c.data,v.value=parseInt(c.headers["x-total-count"])||0}catch(t){console.error("Failed to load all bookings data:",t)}finally{u.value=!1}}function b(r){return r?new Date(r).toLocaleString("zh-TW"):"N/A"}return(r,e)=>{const o=a("v-toolbar-title"),t=a("v-spacer"),c=a("v-text-field"),h=a("v-toolbar"),k=a("v-data-table-server"),x=a("v-card"),y=a("v-container");return V(),w(y,{fluid:""},{default:d(()=>[n(x,{rounded:"lg"},{default:d(()=>[n(h,{flat:""},{default:d(()=>[n(o,null,{default:d(()=>e[2]||(e[2]=[p("所有預約紀錄",-1)])),_:1,__:[2]}),n(t),n(c,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=i=>s.value=i),"append-inner-icon":"mdi-magnify",label:"搜尋客戶名稱","single-line":"","hide-details":"",density:"compact",style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1}),n(k,{"items-per-page":_.value,"onUpdate:itemsPerPage":e[1]||(e[1]=i=>_.value=i),headers:f.value,items:m.value,"items-length":v.value,loading:u.value,search:s.value,"item-value":"id","onUpdate:options":g},{"item.dateTime":d(({value:i})=>[p(I(b(i)),1)]),_:1},8,["items-per-page","headers","items","items-length","loading","search"])]),_:1})]),_:1})}}};export{N as default};
