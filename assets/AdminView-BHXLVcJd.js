import{f as F,r as N,s as L,h as G,c as m,w as s,i as p,a as t,o as i,b as l,d as u,l as _,F as j,q,m as z,k as D}from"./index-pXMbeQVl.js";const E={key:1},M={key:0,class:"d-flex"},H={__name:"AdminView",setup(O){const c=F(),d=N(!0),f=[{text:"星期一",value:1},{text:"星期二",value:2},{text:"星期三",value:3},{text:"星期四",value:4},{text:"星期五",value:5},{text:"星期六",value:6},{text:"星期日",value:0}];function x(){const e={};for(let a=0;a<7;a++)e[a]={active:!1,start:"09:00",end:"17:00"};return e}const o=L(x());async function b(){d.value=!0;try{const{data:e}=await p.get("/availability");e&&e.length>0&&e[0].schedule&&Object.assign(o,e[0].schedule)}catch(e){c.showSnackbar("讀取時段資料失敗","error"),console.error("Failed to fetch availability:",e)}finally{d.value=!1}}async function h(){c.setGlobalLoading(!0);try{const e=[{id:"singleton",schedule:o}];await p.put("/availability",e),c.showSnackbar("可預約時段已更新！","success")}catch(e){c.showSnackbar("儲存失敗","error"),console.error("Failed to save availability:",e)}finally{c.setGlobalLoading(!1)}}return G(b),(e,a)=>{const y=t("v-card-title"),V=t("v-card-subtitle"),k=t("v-skeleton-loader"),g=t("v-checkbox-btn"),v=t("v-text-field"),w=t("v-card-text"),S=t("v-spacer"),U=t("v-btn"),C=t("v-card-actions"),A=t("v-card"),B=t("v-container");return i(),m(B,null,{default:s(()=>[l(A,{rounded:"lg"},{default:s(()=>[l(y,{class:"text-h5"},{default:s(()=>a[0]||(a[0]=[u("設定每週可預約時段",-1)])),_:1,__:[0]}),l(V,null,{default:s(()=>a[1]||(a[1]=[u("勾選開放預約的星期，並設定時間範圍。",-1)])),_:1,__:[1]}),l(w,null,{default:s(()=>[d.value?(i(),m(k,{key:0,type:"list-item-three-line@7"})):(i(),_("div",E,[(i(),_(j,null,q(f,n=>z("div",{key:n.value,class:"d-flex align-center my-4 pa-3 border rounded"},[l(g,{modelValue:o[n.value].active,"onUpdate:modelValue":r=>o[n.value].active=r,label:n.text,class:"flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","label"]),o[n.value].active?(i(),_("div",M,[l(v,{modelValue:o[n.value].start,"onUpdate:modelValue":r=>o[n.value].start=r,label:"開始時間",type:"time",density:"compact","hide-details":"",class:"mx-2",style:{"max-width":"150px"}},null,8,["modelValue","onUpdate:modelValue"]),l(v,{modelValue:o[n.value].end,"onUpdate:modelValue":r=>o[n.value].end=r,label:"結束時間",type:"time",density:"compact","hide-details":"",class:"mx-2",style:{"max-width":"150px"}},null,8,["modelValue","onUpdate:modelValue"])])):D("",!0)])),64))]))]),_:1}),l(C,null,{default:s(()=>[l(S),l(U,{color:"primary",size:"large",onClick:h},{default:s(()=>a[2]||(a[2]=[u("儲存設定",-1)])),_:1,__:[2]})]),_:1})]),_:1})]),_:1})}}};export{H as default};
